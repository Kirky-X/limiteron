<div align="center">

# ğŸ“– ç”¨æˆ·æŒ‡å—

### Limiteron å®Œæ•´ä½¿ç”¨æŒ‡å—

[ğŸ  é¦–é¡µ](../README.md) â€¢ [ğŸ“š æ–‡æ¡£](README.md) â€¢ [ğŸ¯ ç¤ºä¾‹](../examples/) â€¢ [â“ å¸¸è§é—®é¢˜](FAQ.md)

---

</div>

## ğŸ“‹ ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
  - [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
  - [å®‰è£…](#å®‰è£…)
  - [ç¬¬ä¸€æ­¥](#ç¬¬ä¸€æ­¥)
- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [åŸºæœ¬ä½¿ç”¨](#åŸºæœ¬ä½¿ç”¨)
  - [åˆå§‹åŒ–](#åˆå§‹åŒ–)
  - [é…ç½®](#é…ç½®)
  - [åŸºæœ¬æ“ä½œ](#åŸºæœ¬æ“ä½œ)
- [é«˜çº§ä½¿ç”¨](#é«˜çº§ä½¿ç”¨)
  - [è‡ªå®šä¹‰é…ç½®](#è‡ªå®šä¹‰é…ç½®)
  - [æ€§èƒ½è°ƒä¼˜](#æ€§èƒ½è°ƒä¼˜)
  - [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§æ¨¡å¼](#å¸¸è§æ¨¡å¼)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [ä¸‹ä¸€æ­¥](#ä¸‹ä¸€æ­¥)

---

## ç®€ä»‹

<div align="center">

### ğŸ¯ ä½ å°†å­¦åˆ°ä»€ä¹ˆ

</div>

<table>
<tr>
<td width="25%" align="center">
<img src="https://img.icons8.com/fluency/96/000000/rocket.png" width="64"><br>
<b>å¿«é€Ÿå¼€å§‹</b><br>
5 åˆ†é’Ÿä¸Šæ‰‹
</td>
<td width="25%" align="center">
<img src="https://img.icons8.com/fluency/96/000000/settings.png" width="64"><br>
<b>é…ç½®</b><br>
è‡ªå®šä¹‰é…ç½®
</td>
<td width="25%" align="center">
<img src="https://img.icons8.com/fluency/96/000000/code.png" width="64"><br>
<b>æœ€ä½³å®è·µ</b><br>
å­¦ä¹ æ­£ç¡®çš„æ–¹æ³•
</td>
<td width="25%" align="center">
<img src="https://img.icons8.com/fluency/96/000000/rocket-take-off.png" width="64"><br>
<b>é«˜çº§ä¸»é¢˜</b><br>
æŒæ¡ç»†èŠ‚
</td>
</tr>
</table>

**Limiteron** æ˜¯ä¸€ä¸ª Rust ç»Ÿä¸€æµé‡æ§åˆ¶æ¡†æ¶ï¼Œå¸®åŠ©ä½ ä¿æŠ¤åº”ç”¨å…å—æ»¥ç”¨å’Œ DDoS æ”»å‡»ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»åŸºç¡€è®¾ç½®åˆ°é«˜çº§ä½¿ç”¨æ¨¡å¼ã€‚

> ğŸ’¡ **æç¤º**: æœ¬æŒ‡å—å‡è®¾ä½ å…·å¤‡åŸºæœ¬çš„ Rust çŸ¥è¯†ã€‚å¦‚æœä½ æ˜¯ Rust æ–°æ‰‹ï¼Œå»ºè®®å…ˆå­¦ä¹  Rust åŸºç¡€è¯­æ³•ã€‚

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²å®‰è£…ä»¥ä¸‹å†…å®¹ï¼š

<table>
<tr>
<td width="50%">

**å¿…éœ€**
- âœ… Rust 1.75+ (stable)
- âœ… Cargo (éš Rust ä¸€èµ·å®‰è£…)
- âœ… Git

</td>
<td width="50%">

**å¯é€‰**
- ğŸ”§ æ”¯æŒ Rust çš„ IDE
- ğŸ”§ Dockerï¼ˆç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- ğŸ”§ PostgreSQLï¼ˆç”¨äºæŒä¹…åŒ–å­˜å‚¨ï¼‰
- ğŸ”§ Redisï¼ˆç”¨äºç¼“å­˜å’Œåˆ†å¸ƒå¼é™æµï¼‰

</td>
</tr>
</table>

<details>
<summary><b>ğŸ” éªŒè¯ä½ çš„å®‰è£…</b></summary>

```bash
# æ£€æŸ¥ Rust ç‰ˆæœ¬
rustc --version
# é¢„æœŸ: rustc 1.75.0 (æˆ–æ›´é«˜)

# æ£€æŸ¥ Cargo ç‰ˆæœ¬
cargo --version
# é¢„æœŸ: cargo 1.75.0 (æˆ–æ›´é«˜)

# æ£€æŸ¥ Git ç‰ˆæœ¬
git --version
# é¢„æœŸ: git version 2.x.x
```

</details>

### å®‰è£…

<div align="center">

#### é€‰æ‹©ä½ çš„å®‰è£…æ–¹æ³•

</div>

<table>
<tr>
<td width="50%">

**ğŸ“¦ ä½¿ç”¨ Cargoï¼ˆæ¨èï¼‰**

```bash
# æ·»åŠ åˆ° Cargo.toml
[dependencies]
limiteron = "1.0"

# æˆ–é€šè¿‡å‘½ä»¤å®‰è£…
cargo add limiteron
```

</td>
<td width="50%">

**ğŸ™ ä»æºç å®‰è£…**

```bash
git clone https://github.com/kirkyx/limiteron
cd limiteron
cargo build --release
```

</td>
</tr>
</table>

<details>
<summary><b>ğŸŒ å…¶ä»–å®‰è£…æ–¹æ³•</b></summary>

**å¯ç”¨ç‰¹æ€§**
```toml
[dependencies]
limiteron = { version = "1.0", features = ["postgres", "redis"] }
```

**æœ¬åœ°å¼€å‘**
```bash
# ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬
[dependencies]
limiteron = { path = "/path/to/limiteron" }
```

</details>

### ç¬¬ä¸€æ­¥

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ "Hello World" æ¥éªŒè¯ä½ çš„å®‰è£…ï¼š

```rust
use limiteron::limiters::TokenBucketLimiter;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // åˆ›å»ºé™æµå™¨
    let mut limiter = TokenBucketLimiter::new(10, 1);
    let key = "user123";

    // æ£€æŸ¥é™æµ
    match limiter.check(key).await {
        Ok(_) => println!("âœ… Limiteron å·²å°±ç»ªï¼"),
        Err(_) => println!("âŒ è¯·æ±‚è¢«é™æµ"),
    }

    Ok(())
}
```

<details>
<summary><b>ğŸ¬ è¿è¡Œç¤ºä¾‹</b></summary>

```bash
# åˆ›å»ºæ–°é¡¹ç›®
cargo new hello-limiteron
cd hello-limiteron

# æ·»åŠ ä¾èµ–
cargo add limiteron

# å°†ä¸Šé¢çš„ä»£ç å¤åˆ¶åˆ° src/main.rs

# è¿è¡Œï¼
cargo run
```

**é¢„æœŸè¾“å‡º:**
```
âœ… Limiteron å·²å°±ç»ªï¼
```

</details>

---

## æ ¸å¿ƒæ¦‚å¿µ

ç†è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µå°†å¸®åŠ©ä½ æœ‰æ•ˆåœ°ä½¿ç”¨è¿™ä¸ªåº“ã€‚

<div align="center">

### ğŸ§© å…³é”®ç»„ä»¶

</div>

```mermaid
graph TD
    A[ä½ çš„åº”ç”¨] --> B[Governor]
    B --> C[æ ‡è¯†ç¬¦æå–]
    B --> D[å†³ç­–é“¾]
    C --> E[åŒ¹é…å™¨]
    D --> F[é™æµå™¨]
    D --> G[å°ç¦ç®¡ç†]
    D --> H[é…é¢æ§åˆ¶]
    D --> I[ç†”æ–­å™¨]
    F --> J[L2/L3 ç¼“å­˜]
    G --> J
    H --> J
    J --> K[å­˜å‚¨å±‚]

    style A fill:#e1f5ff
    style B fill:#81d4fa
    style C fill:#4fc3f7
    style D fill:#4fc3f7
    style E fill:#29b6f6
    style F fill:#29b6f6
    style G fill:#29b6f6
    style H fill:#29b6f6
    style I fill:#29b6f6
    style J fill:#0288d1
    style K fill:#01579b
```

### 1ï¸âƒ£ é™æµå™¨

**æ˜¯ä»€ä¹ˆ**: æ§åˆ¶è¯·æ±‚é€Ÿç‡çš„ç»„ä»¶ã€‚

**ä¸ºä»€ä¹ˆé‡è¦**: ä¿æŠ¤æœåŠ¡å…å—æ»¥ç”¨å’Œ DDoS æ”»å‡»ã€‚

**ç¤ºä¾‹:**
```rust
use limiteron::limiters::TokenBucketLimiter;

let limiter = TokenBucketLimiter::new(10, 1); // 10 ä¸ªä»¤ç‰Œï¼Œæ¯ç§’è¡¥å…… 1 ä¸ª
limiter.check("user123").await?;
```

<details>
<summary><b>ğŸ“š äº†è§£æ›´å¤š</b></summary>

è¯¦ç»†è¯´æ˜ï¼š
- **ä»¤ç‰Œæ¡¶**: æ¡¶ä¸­å›ºå®šæ•°é‡çš„ä»¤ç‰Œï¼Œè¯·æ±‚æ¶ˆè€—ä»¤ç‰Œï¼Œå®šæœŸè¡¥å……
- **å›ºå®šçª—å£**: åœ¨å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°
- **æ»‘åŠ¨çª—å£**: ä½¿ç”¨æ»‘åŠ¨æ—¶é—´çª—å£æä¾›æ›´ç²¾ç¡®çš„é™æµ
- **å¹¶å‘æ§åˆ¶**: é™åˆ¶åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°

</details>

### 2ï¸âƒ£ å°ç¦ç®¡ç†

**æ˜¯ä»€ä¹ˆ**: ç®¡ç†æ¶æ„ç”¨æˆ·å’Œ IP çš„å°ç¦ã€‚

**å…³é”®ç‰¹æ€§:**
- âœ… IP å°ç¦
- âœ… ç”¨æˆ·å°ç¦
- âœ… è‡ªåŠ¨å°ç¦
- âœ… å°ç¦ä¼˜å…ˆçº§

**ç¤ºä¾‹:**
```rust
use limiteron::BanManager;

let ban_manager = BanManager::new().await?;
ban_manager.ban("192.168.1.100", "æ¶æ„è¯·æ±‚", 3600).await?;
```

### 3ï¸âƒ£ é…é¢æ§åˆ¶

**æ˜¯ä»€ä¹ˆ**: åœ¨ç‰¹å®šæ—¶é—´çª—å£å†…é™åˆ¶æ€»è¯·æ±‚æ•°ã€‚

<table>
<tr>
<td width="50%">

**ä¼ ç»Ÿæ–¹æ³•**
```rust
// æ‰‹åŠ¨è®¡æ•°
let mut count = 0;
count += 1;
if count > limit {
    return Err("è¶…è¿‡é…é¢");
}
```

</td>
<td width="50%">

**æˆ‘ä»¬çš„æ–¹æ³•**
```rust
// è‡ªåŠ¨ç®¡ç†
let quota = QuotaController::new(10000, 60);
quota.consume("user123").await?;
```

</td>
</tr>
</table>

---

## åŸºæœ¬ä½¿ç”¨

### åˆå§‹åŒ–

æ¯ä¸ªåº”ç”¨åœ¨ä½¿ç”¨å‰å¿…é¡»åˆå§‹åŒ–é™æµå™¨ï¼š

```rust
use limiteron::limiters::TokenBucketLimiter;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // ç®€å•åˆå§‹åŒ–
    let limiter = TokenBucketLimiter::new(10, 1);

    // æˆ–ä½¿ç”¨ Governor
    use limiteron::{Governor, FlowControlConfig};
    let governor = Governor::new(FlowControlConfig::default()).await?;

    Ok(())
}
```

<div align="center">

| æ–¹æ³• | ä½¿ç”¨åœºæ™¯ | æ€§èƒ½ | å¤æ‚åº¦ |
|--------|----------|-------------|------------|
| `TokenBucketLimiter` | å¿«é€Ÿå¼€å§‹ï¼Œå¼€å‘ | âš¡ å¿« | ğŸŸ¢ ç®€å• |
| `Governor` | ç”Ÿäº§ï¼Œè‡ªå®šä¹‰éœ€æ±‚ | âš¡âš¡ ä¼˜åŒ– | ğŸŸ¡ ä¸­ç­‰ |

</div>

### é…ç½®

<details open>
<summary><b>âš™ï¸ é…ç½®é€‰é¡¹</b></summary>

```rust
use limiteron::{Governor, FlowControlConfig};

let config = FlowControlConfig {
    rate_limit: Some("100/s".to_string()),
    quota_limit: Some("10000/m".to_string()),
    concurrency_limit: Some(50),
    ..Default::default()
};

let governor = Governor::new(config).await?;
```

</details>

<table>
<tr>
<th>é€‰é¡¹</th>
<th>ç±»å‹</th>
<th>é»˜è®¤å€¼</th>
<th>æè¿°</th>
</tr>
<tr>
<td><code>rate_limit</code></td>
<td>Option&lt;String&gt;</td>
<td>None</td>
<td>é€Ÿç‡é™åˆ¶ï¼ˆå¦‚ "100/s"ï¼‰</td>
</tr>
<tr>
<td><code>quota_limit</code></td>
<td>Option&lt;String&gt;</td>
<td>None</td>
<td>é…é¢é™åˆ¶ï¼ˆå¦‚ "10000/m"ï¼‰</td>
</tr>
<tr>
<td><code>concurrency_limit</code></td>
<td>Option&lt;u64&gt;</td>
<td>None</td>
<td>å¹¶å‘é™åˆ¶</td>
</tr>
</table>

### åŸºæœ¬æ“ä½œ

<div align="center">

#### ğŸ“ é™æµæ“ä½œ

</div>

<table>
<tr>
<td width="50%">

**æ£€æŸ¥é™æµ**
```rust
let limiter = TokenBucketLimiter::new(10, 1);
match limiter.check(key).await {
    Ok(_) => println!("âœ… å…è®¸"),
    Err(_) => println!("âŒ æ‹’ç»"),
}
```

**å°ç¦ç”¨æˆ·**
```rust
let ban_manager = BanManager::new().await?;
ban_manager.ban("user123", "æ¶æ„", 3600).await?;
```

</td>
<td width="50%">

**é…é¢æ¶ˆè´¹**
```rust
let quota = QuotaController::new(10000, 60);
quota.consume("user123").await?;
```

**ç†”æ–­æ£€æŸ¥**
```rust
let breaker = CircuitBreaker::new(5, 30);
breaker.check().await?;
```

</td>
</tr>
</table>

<details>
<summary><b>ğŸ¯ å®Œæ•´ç¤ºä¾‹</b></summary>

```rust
use limiteron::{Governor, FlowControlConfig};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let governor = Governor::new(FlowControlConfig::default()).await?;

    // æ£€æŸ¥è¯·æ±‚
    let decision = governor.check_request("user123", "/api/v1/users").await?;
    if decision.is_allowed() {
        println!("âœ… è¯·æ±‚å…è®¸");
        // å¤„ç†è¯·æ±‚
    } else {
        println!("âŒ è¯·æ±‚è¢«æ‹’ç»: {:?}", decision);
    }

    Ok(())
}
```

</details>

---

## é«˜çº§ä½¿ç”¨

### è‡ªå®šä¹‰é…ç½®

å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œä½ éœ€è¦ç»†ç²’åº¦çš„æ§åˆ¶ï¼š

```rust
use limiteron::{Governor, FlowControlConfig};

let config = FlowControlConfig {
    rate_limit: Some("100/s".to_string()),
    quota_limit: Some("10000/m".to_string()),
    concurrency_limit: Some(50),
    enable_metrics: true,
    enable_tracing: true,
    ..Default::default()
};

let governor = Governor::new(config).await?;
```

<details>
<summary><b>ğŸ›ï¸ æ€§èƒ½é…ç½®</b></summary>

<table>
<tr>
<th>é…ç½®</th>
<th>ä½¿ç”¨åœºæ™¯</th>
<th>ååé‡</th>
<th>å»¶è¿Ÿ</th>
<th>å†…å­˜</th>
</tr>
<tr>
<td><b>ä½å»¶è¿Ÿ</b></td>
<td>å®æ—¶åº”ç”¨</td>
<td>ä¸­ç­‰</td>
<td>âš¡ éå¸¸ä½</td>
<td>é«˜</td>
</tr>
<tr>
<td><b>é«˜åå</b></td>
<td>æ‰¹å¤„ç†</td>
<td>âš¡ éå¸¸é«˜</td>
<td>ä¸­ç­‰</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><b>å¹³è¡¡</b></td>
<td>é€šç”¨</td>
<td>é«˜</td>
<td>ä½</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><b>ä½å†…å­˜</b></td>
<td>èµ„æºå—é™</td>
<td>ä½</td>
<td>ä¸­ç­‰</td>
<td>âš¡ éå¸¸ä½</td>
</tr>
</table>

</details>

### æ€§èƒ½è°ƒä¼˜

<div align="center">

#### âš¡ ä¼˜åŒ–ç­–ç•¥

</div>

**1. ä½¿ç”¨ç¼“å­˜**

```rust
use limiteron::L2Cache;

let cache = L2Cache::new(10000, 3600)?;
// ç¼“å­˜ä¼šè‡ªåŠ¨æé«˜æ€§èƒ½
```

**2. æ‰¹é‡æ“ä½œ**

<table>
<tr>
<td width="50%">

âŒ **ä½æ•ˆ**
```rust
for item in items {
    limiter.check(&item.id).await?;
}
```

</td>
<td width="50%">

âœ… **é«˜æ•ˆ**
```rust
// ä½¿ç”¨å…±äº«çš„ limiter å®ä¾‹
for item in items {
    limiter.check(&item.id).await?;
}
```

</td>
</tr>
</table>

**3. ä½¿ç”¨å®**

```rust
use limiteron::flow_control;

#[flow_control(rate = "100/s")]
async fn api_handler(user_id: &str) -> Result<String, FlowGuardError> {
    // å®è‡ªåŠ¨å¤„ç†é™æµ
    Ok("Success".to_string())
}
```

### é”™è¯¯å¤„ç†

<div align="center">

#### ğŸš¨ ä¼˜é›…åœ°å¤„ç†é”™è¯¯

</div>

```rust
use limiteron::error::FlowGuardError;

async fn handle_request() -> Result<(), FlowGuardError> {
    match limiter.check(key).await {
        Ok(_) => {
            println!("âœ… è¯·æ±‚å…è®¸");
            Ok(())
        }
        Err(FlowGuardError::RateLimitExceeded(msg)) => {
            println!("âš ï¸ é€Ÿç‡é™åˆ¶: {}", msg);
            Ok(())
        }
        Err(FlowGuardError::Banned(msg)) => {
            eprintln!("âŒ å·²å°ç¦: {}", msg);
            Err(FlowGuardError::Banned(msg))
        }
        Err(e) => {
            eprintln!("âŒ é”™è¯¯: {:?}", e);
            Err(e)
        }
    }
}
```

<details>
<summary><b>ğŸ“‹ é”™è¯¯ç±»å‹</b></summary>

| é”™è¯¯ç±»å‹ | æè¿° | æ¢å¤ç­–ç•¥ |
|------------|-------------|-------------------|
| `RateLimitExceeded` | è¶…è¿‡é€Ÿç‡é™åˆ¶ | ç­‰å¾…é‡è¯• |
| `QuotaExceeded` | è¶…è¿‡é…é¢é™åˆ¶ | ç­‰å¾…ä¸‹ä¸€ä¸ªæ—¶é—´çª—å£ |
| `Banned` | å·²è¢«å°ç¦ | è”ç³»ç®¡ç†å‘˜ |
| `CircuitBreakerOpen` | ç†”æ–­å™¨å·²æ‰“å¼€ | ç­‰å¾…æ¢å¤ |
| `InvalidInput` | æ— æ•ˆè¾“å…¥ | éªŒè¯è¾“å…¥ |

</details>

---

## æœ€ä½³å®è·µ

<div align="center">

### ğŸŒŸ éµå¾ªè¿™äº›æŒ‡å—

</div>

### âœ… DO's

<table>
<tr>
<td width="50%">

**å°½æ—©åˆå§‹åŒ–**
```rust
#[tokio::main]
async fn main() {
    // åœ¨å¼€å§‹æ—¶åˆå§‹åŒ–
    let governor = Governor::new(FlowControlConfig::default()).await.unwrap();

    // ç„¶åä½¿ç”¨
    do_work().await;
}
```

</td>
<td width="50%">

**ä½¿ç”¨å…¨å±€å®ä¾‹**
```rust
// ç¡®ä¿æ‰€æœ‰è¯·æ±‚å…±äº«åŒä¸€ä¸ª limiter å®ä¾‹
lazy_static! {
    static ref LIMITER: TokenBucketLimiter = TokenBucketLimiter::new(10, 1);
}
```

</td>
</tr>
<tr>
<td width="50%">

**æ­£ç¡®å¤„ç†é”™è¯¯**
```rust
match limiter.check(key).await {
    Ok(_) => process(),
    Err(e) => handle_error(e),
}
```

</td>
<td width="50%">

**ä½¿ç”¨å®ç®€åŒ–ä»£ç **
```rust
#[flow_control(rate = "100/s")]
async fn api_handler() -> Result<String, FlowGuardError> {
    // å®è‡ªåŠ¨å¤„ç†é™æµ
    Ok("Success".to_string())
}
```

</td>
</tr>
</table>

### âŒ DON'Ts

<table>
<tr>
<td width="50%">

**ä¸è¦å¿½ç•¥é”™è¯¯**
```rust
// âŒ ä¸å¥½
let _ = limiter.check(key).await;

// âœ… å¥½
limiter.check(key).await?;
```

</td>
<td width="50%">

**ä¸è¦åœ¨å¾ªç¯ä¸­åˆ›å»º limiter**
```rust
// âŒ ä¸å¥½
for request in requests {
    let limiter = TokenBucketLimiter::new(10, 1);
    limiter.check(key).await?;
}

// âœ… å¥½
let limiter = TokenBucketLimiter::new(10, 1);
for request in requests {
    limiter.check(key).await?;
}
```

</td>
</tr>
</table>

### ğŸ’¡ æç¤ºå’ŒæŠ€å·§

> **ğŸ”¥ æ€§èƒ½æç¤º**: åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨ release æ¨¡å¼ä¼˜åŒ–:
> ```bash
> cargo build --release
> ```

> **ğŸ”’ å®‰å…¨æç¤º**: æ°¸è¿œä¸è¦ç¡¬ç¼–ç æ•æ„Ÿæ•°æ®:
> ```rust
> // âŒ ä¸å¥½
> let redis_url = "redis://:password@localhost:6379";
>
> // âœ… å¥½
> let redis_url = env::var("REDIS_URL")?;
> ```

> **ğŸ“Š ç›‘æ§æç¤º**: åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨æŒ‡æ ‡:
> ```rust
> FlowControlConfig {
>     enable_metrics: true,
>     ..Default::default()
> }
> ```

---

## å¸¸è§æ¨¡å¼

### æ¨¡å¼ 1: API ä¿æŠ¤

```rust
use limiteron::flow_control;

#[flow_control(rate = "100/s", quota = "10000/m")]
async fn api_handler(user_id: &str) -> Result<String, FlowGuardError> {
    // API ä¸šåŠ¡é€»è¾‘
    Ok(format!("å¤„ç†ç”¨æˆ· {}", user_id))
}
```

### æ¨¡å¼ 2: åˆ†å¸ƒå¼é™æµ

```rust
use limiteron::redis_storage::RedisStorage;

let storage = RedisStorage::new("redis://localhost:6379").await?;
let limiter = TokenBucketLimiter::with_storage(storage, 10, 1);
```

### æ¨¡å¼ 3: å¤šçº§é™æµ

```rust
use limiteron::decision_chain::DecisionChain;

let chain = DecisionChain::new()
    .add_limiter(rate_limiter)
    .add_limiter(quota_limiter)
    .add_limiter(concurrency_limiter);

let decision = chain.check(key).await?;
```

---

## æ•…éšœæ’é™¤

<details>
<summary><b>â“ é—®é¢˜: é™æµä¸ç”Ÿæ•ˆ</b></summary>

**è§£å†³æ–¹æ¡ˆ:**
```rust
// ç¡®ä¿ä½¿ç”¨å…¨å±€å…±äº«çš„ limiter å®ä¾‹
lazy_static! {
    static ref LIMITER: TokenBucketLimiter = TokenBucketLimiter::new(10, 1);
}

// æˆ–ä½¿ç”¨å®
#[flow_control(rate = "10/s")]
async fn handler() -> Result<(), FlowGuardError> {
    Ok(())
}
```

</details>

<details>
<summary><b>â“ é—®é¢˜: æ€§èƒ½æ¯”é¢„æœŸæ…¢</b></summary>

**è¯Šæ–­:**
1. å¯ç”¨è°ƒè¯•æ—¥å¿—
2. æ£€æŸ¥é…ç½®è®¾ç½®
3. ä½¿ç”¨ç¼“å­˜

**è§£å†³æ–¹æ¡ˆ:**
```rust
// ä½¿ç”¨ç¼“å­˜
let cache = L2Cache::new(10000, 3600)?;
```

</details>

<details>
<summary><b>â“ é—®é¢˜: å†…å­˜ä½¿ç”¨è¿‡é«˜</b></summary>

**è§£å†³æ–¹æ¡ˆ:**
```rust
// å‡å°‘ç¼“å­˜å¤§å°
let cache = L2Cache::new(1000, 3600)?;
```

</details>

<div align="center">

**ğŸ’¬ è¿˜éœ€è¦å¸®åŠ©ï¼Ÿ** [åˆ›å»º issue](../../issues)

</div>

---

## ä¸‹ä¸€æ­¥

<div align="center">

### ğŸ¯ ç»§ç»­ä½ çš„å­¦ä¹ ä¹‹æ—…

</div>

<table>
<tr>
<td width="33%" align="center">
<a href="../examples/">
<img src="https://img.icons8.com/fluency/96/000000/code.png" width="64"><br>
<b>ğŸ’» ç¤ºä¾‹</b>
</a><br>
å®é™…ä»£ç ç¤ºä¾‹
</td>
<td width="33%" align="center">
<a href="API_REFERENCE.md">
<img src="https://img.icons8.com/fluency/96/000000/api.png" width="64"><br>
<b>ğŸ“š API å‚è€ƒ</b>
</a><br>
å®Œæ•´ API æ–‡æ¡£
</td>
<td width="33%" align="center">
<a href="FAQ.md">
<img src="https://img.icons8.com/fluency/96/000000/question.png" width="64"><br>
<b>â“ å¸¸è§é—®é¢˜</b>
</a><br>
å¸¸è§é—®é¢˜è§£ç­”
</td>
</tr>
</table>

---

<div align="center">

**[ğŸ“– API å‚è€ƒ](API_REFERENCE.md)** â€¢ **[â“ å¸¸è§é—®é¢˜](FAQ.md)** â€¢ **[ğŸ› æŠ¥å‘Šé—®é¢˜](../../issues)**

ç”±é¡¹ç›®å›¢é˜Ÿåˆ¶ä½œ

[â¬† è¿”å›é¡¶éƒ¨](#-ç”¨æˆ·æŒ‡å—)

</div>